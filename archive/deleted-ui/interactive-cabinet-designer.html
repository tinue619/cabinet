<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>üéÆ Cabinet Designer - –ò–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–∞—è –≤–µ—Ä—Å–∏—è</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: #f5f6fa;
            overflow: hidden;
        }
        
        .app {
            display: grid;
            grid-template-columns: 300px 1fr 300px;
            grid-template-rows: 60px 1fr;
            height: 100vh;
        }
        
        .header {
            grid-column: 1 / -1;
            background: #2c3e50;
            color: white;
            display: flex;
            align-items: center;
            padding: 0 20px;
            justify-content: space-between;
        }
        
        .header h1 {
            font-size: 1.5em;
            font-weight: 300;
        }
        
        .version {
            background: #3498db;
            padding: 4px 8px;
            border-radius: 4px;
            font-size: 0.8em;
        }
        
        .left-panel, .right-panel {
            background: white;
            border-right: 1px solid #ddd;
            overflow-y: auto;
        }
        
        .right-panel {
            border-right: none;
            border-left: 1px solid #ddd;
        }
        
        .panel-section {
            padding: 15px;
            border-bottom: 1px solid #eee;
        }
        
        .panel-section h3 {
            margin-bottom: 10px;
            color: #2c3e50;
            font-size: 1em;
        }
        
        .dimension-input {
            margin-bottom: 10px;
        }
        
        .dimension-input label {
            display: block;
            font-size: 0.9em;
            color: #7f8c8d;
            margin-bottom: 4px;
        }
        
        .dimension-input input {
            width: 100%;
            padding: 8px;
            border: 1px solid #ddd;
            border-radius: 4px;
            font-size: 0.9em;
        }
        
        .canvas-area {
            position: relative;
            background: #ecf0f1;
            overflow: hidden;
        }
        
        #canvas {
            display: block;
            background: white;
            border: 1px solid #bdc3c7;
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            cursor: grab;
        }
        
        #canvas:active {
            cursor: grabbing;
        }
        
        .canvas-controls {
            position: absolute;
            top: 10px;
            right: 10px;
            background: rgba(255,255,255,0.9);
            border-radius: 8px;
            padding: 8px;
            display: flex;
            gap: 4px;
        }
        
        .zoom-btn {
            width: 32px;
            height: 32px;
            border: 1px solid #bdc3c7;
            background: white;
            border-radius: 4px;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            transition: background 0.2s;
        }
        
        .zoom-btn:hover {
            background: #ecf0f1;
        }
        
        .zoom-info {
            padding: 8px;
            font-size: 0.9em;
            color: #7f8c8d;
        }
        
        .panel-list {
            list-style: none;
        }
        
        .panel-item {
            padding: 8px;
            border: 1px solid #eee;
            border-radius: 4px;
            margin-bottom: 4px;
            cursor: pointer;
            transition: all 0.2s;
            background: #f8f9fa;
        }
        
        .panel-item:hover {
            background: #e3f2fd;
            border-color: #2196f3;
        }
        
        .panel-item.selected {
            background: #2196f3;
            color: white;
            border-color: #1976d2;
        }
        
        .panel-name {
            font-weight: 500;
            font-size: 0.9em;
        }
        
        .panel-dimensions {
            font-size: 0.8em;
            color: #666;
            margin-top: 2px;
        }
        
        .panel-item.selected .panel-dimensions {
            color: #bbdefb;
        }
        
        .stats-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 10px;
        }
        
        .stat-item {
            text-align: center;
            padding: 10px;
            background: #f8f9fa;
            border-radius: 4px;
        }
        
        .stat-value {
            font-size: 1.2em;
            font-weight: bold;
            color: #2c3e50;
        }
        
        .stat-label {
            font-size: 0.8em;
            color: #7f8c8d;
            margin-top: 4px;
        }
        
        .section-management {
            background: #fff3cd;
            padding: 10px;
            border-radius: 4px;
            margin-top: 10px;
        }
        
        .section-btn {
            width: 100%;
            padding: 8px;
            border: 1px solid #ffc107;
            background: #fff8dc;
            border-radius: 4px;
            cursor: pointer;
            margin-bottom: 8px;
            transition: background 0.2s;
        }
        
        .section-btn:hover {
            background: #ffeaa7;
        }
        
        .divider-controls {
            background: #e8f5e8;
            padding: 10px;
            border-radius: 4px;
            margin-top: 10px;
        }
        
        .divider-btn {
            width: 100%;
            padding: 8px;
            border: 1px solid #4caf50;
            background: #f1f8e9;
            border-radius: 4px;
            cursor: pointer;
            margin-bottom: 8px;
            transition: background 0.2s;
        }
        
        .divider-btn:hover {
            background: #c8e6c9;
        }
        
        .mode-selector {
            display: flex;
            gap: 4px;
            margin-bottom: 10px;
        }
        
        .mode-btn {
            flex: 1;
            padding: 8px;
            border: 1px solid #ddd;
            background: #f8f9fa;
            cursor: pointer;
            border-radius: 4px;
            transition: all 0.2s;
        }
        
        .mode-btn.active {
            background: #3498db;
            color: white;
            border-color: #2980b9;
        }
    </style>
</head>
<body>
    <div class="app">
        <header class="header">
            <div>
                <h1>üéÆ Cabinet Designer</h1>
                <span class="version">Interactive v3.3</span>
            </div>
            <div id="status">–ó–∞–≥—Ä—É–∑–∫–∞...</div>
        </header>
        
        <div class="left-panel">
            <div class="panel-section">
                <h3>üèóÔ∏è –†–∞–∑–º–µ—Ä—ã —à–∫–∞—Ñ–∞</h3>
                <div class="dimension-input">
                    <label>–®–∏—Ä–∏–Ω–∞ (–º–º)</label>
                    <input type="number" id="width" value="800" min="300" max="3000">
                </div>
                <div class="dimension-input">
                    <label>–í—ã—Å–æ—Ç–∞ (–º–º)</label>
                    <input type="number" id="height" value="2000" min="500" max="3000">
                </div>
                <div class="dimension-input">
                    <label>–ì–ª—É–±–∏–Ω–∞ (–º–º)</label>
                    <input type="number" id="depth" value="600" min="200" max="1000">
                </div>
                <div class="dimension-input">
                    <label>–í—ã—Å–æ—Ç–∞ —Ü–æ–∫–æ–ª—è (–º–º)</label>
                    <input type="number" id="baseHeight" value="100" min="50" max="200">
                </div>
            </div>
            
            <div class="panel-section">
                <h3>üéÆ –ò–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å</h3>
                <div class="mode-selector">
                    <button class="mode-btn active" data-mode="view">–ü—Ä–æ—Å–º–æ—Ç—Ä</button>
                    <button class="mode-btn" data-mode="edit">–ü—Ä–∞–≤–∫–∞</button>
                </div>
                
                <div class="divider-controls">
                    <h4 style="margin-bottom: 8px;">üìê –†–∞–∑–¥–µ–ª–∏—Ç–µ–ª–∏</h4>
                    <button class="divider-btn" id="add-vertical-divider">
                        ‚ûï –í–µ—Ä—Ç–∏–∫–∞–ª—å–Ω—ã–π —Ä–∞–∑–¥–µ–ª–∏—Ç–µ–ª—å
                    </button>
                    <button class="divider-btn" id="add-horizontal-divider">
                        ‚ûï –ì–æ—Ä–∏–∑–æ–Ω—Ç–∞–ª—å–Ω—ã–π —Ä–∞–∑–¥–µ–ª–∏—Ç–µ–ª—å
                    </button>
                </div>
                
                <div class="section-management">
                    <h4 style="margin-bottom: 8px;">üì¶ –°–µ–∫—Ü–∏–∏</h4>
                    <button class="section-btn" id="show-sections">
                        üëÅÔ∏è –ü–æ–∫–∞–∑–∞—Ç—å —Å–µ–∫—Ü–∏–∏
                    </button>
                    <button class="section-btn" id="auto-sections">
                        üîÑ –ü–µ—Ä–µ—Å—á–∏—Ç–∞—Ç—å —Å–µ–∫—Ü–∏–∏
                    </button>
                </div>
            </div>
        </div>
        
        <div class="canvas-area">
            <canvas id="canvas" width="800" height="600"></canvas>
            
            <div class="canvas-controls">
                <button class="zoom-btn" id="zoom-in" title="–ü—Ä–∏–±–ª–∏–∑–∏—Ç—å">+</button>
                <button class="zoom-btn" id="zoom-out" title="–û—Ç–¥–∞–ª–∏—Ç—å">‚àí</button>
                <button class="zoom-btn" id="zoom-fit" title="–ü–æ —Ä–∞–∑–º–µ—Ä—É">‚ä°</button>
                <div class="zoom-info">
                    <span id="zoom-level">100%</span>
                </div>
            </div>
        </div>
        
        <div class="right-panel">
            <div class="panel-section">
                <h3>üìä –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞</h3>
                <div class="stats-grid">
                    <div class="stat-item">
                        <div class="stat-value" id="panels-count">8</div>
                        <div class="stat-label">–ü–∞–Ω–µ–ª–µ–π</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-value" id="sections-count">1</div>
                        <div class="stat-label">–°–µ–∫—Ü–∏–π</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-value" id="dividers-count">0</div>
                        <div class="stat-label">–†–∞–∑–¥–µ–ª–∏—Ç–µ–ª–µ–π</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-value" id="cabinet-volume">0.96</div>
                        <div class="stat-label">–º¬≥</div>
                    </div>
                </div>
            </div>
            
            <div class="panel-section">
                <h3>üìã –°–ø–∏—Å–æ–∫ –¥–µ—Ç–∞–ª–µ–π</h3>
                <ul class="panel-list" id="panels-list">
                    <!-- –ë—É–¥–µ—Ç –∑–∞–ø–æ–ª–Ω–µ–Ω–æ JS -->
                </ul>
            </div>
            
            <div class="panel-section">
                <h3>üîç –í—ã–±—Ä–∞–Ω–Ω–∞—è –ø–∞–Ω–µ–ª—å</h3>
                <div id="selected-panel-info">
                    <p style="color: #7f8c8d; font-style: italic;">–ù–∞–∂–º–∏—Ç–µ –Ω–∞ –ø–∞–Ω–µ–ª—å –¥–ª—è –≤—ã–±–æ—Ä–∞</p>
                </div>
            </div>
        </div>
    </div>

    <script type="module">
        // üéÆ –ò–ù–¢–ï–†–ê–ö–¢–ò–í–ù–ê–Ø –°–ò–°–¢–ï–ú–ê CABINET DESIGNER
        // Application Layer - –ø–æ–ª–Ω–∞—è –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å

        class InteractiveCabinetDesigner {
            constructor() {
                this.cabinet = null;
                this.lightweightCabinet = null;
                this.selectedPanel = null;
                this.currentMode = 'view';
                this.showSections = false;
                this.dividers = [];
                
                // Canvas state
                this.canvas = document.getElementById('canvas');
                this.ctx = this.canvas.getContext('2d');
                this.scale = 1;
                this.offsetX = 0;
                this.offsetY = 0;
                this.isDragging = false;
                this.lastMousePos = { x: 0, y: 0 };
                
                this.init();
            }
            
            async init() {
                try {
                    // –ò–º–ø–æ—Ä—Ç–∏—Ä—É–µ–º —è–¥—Ä–æ –∏ –∞–¥–∞–ø—Ç–µ—Ä
                    const { Cabinet } = await import('./new_core/entities/Cabinet.js');
                    const { LightweightCabinetAdapter } = await import('./new_core/adapters/LightweightCabinetAdapter.js');
                    
                    this.Cabinet = Cabinet;
                    this.LightweightCabinetAdapter = LightweightCabinetAdapter;
                    
                    // –°–æ–∑–¥–∞–µ–º –Ω–∞—á–∞–ª—å–Ω—ã–π —à–∫–∞—Ñ
                    await this.createCabinet();
                    
                    // –ù–∞—Å—Ç—Ä–∞–∏–≤–∞–µ–º –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å
                    this.setupUI();
                    this.setupCanvas();
                    
                    document.getElementById('status').textContent = '‚úÖ –ì–æ—Ç–æ–≤ –∫ —Ä–∞–±–æ—Ç–µ';
                    
                } catch (error) {
                    console.error('Init error:', error);
                    document.getElementById('status').textContent = '‚ùå –û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏';
                }
            }
            
            async createCabinet() {
                const width = parseInt(document.getElementById('width').value);
                const height = parseInt(document.getElementById('height').value);
                const depth = parseInt(document.getElementById('depth').value);
                const baseHeight = parseInt(document.getElementById('baseHeight').value);
                
                this.cabinet = new this.Cabinet({
                    width, height, depth, baseHeight
                });
                
                this.cabinet.generate();
                
                // –°–æ–∑–¥–∞–µ–º –ª–µ–≥–∫–æ–≤–µ—Å–Ω–æ–µ –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏–µ –¥–ª—è –±—ã—Å—Ç—Ä–æ–π –æ—Ç—Ä–∏—Å–æ–≤–∫–∏
                this.lightweightCabinet = this.LightweightCabinetAdapter
                    .createLightweightRepresentation(this.cabinet);
                
                this.updateStats();
                this.updatePanelsList();
                this.render();
            }
            
            setupUI() {
                // –†–∞–∑–º–µ—Ä—ã —à–∫–∞—Ñ–∞
                ['width', 'height', 'depth', 'baseHeight'].forEach(id => {
                    document.getElementById(id).addEventListener('input', () => {
                        this.createCabinet();
                    });
                });
                
                // –ó—É–º –∫–æ–Ω—Ç—Ä–æ–ª–ª—ã
                document.getElementById('zoom-in').addEventListener('click', () => {
                    this.setZoom(this.scale * 1.2);
                });
                
                document.getElementById('zoom-out').addEventListener('click', () => {
                    this.setZoom(this.scale / 1.2);
                });
                
                document.getElementById('zoom-fit').addEventListener('click', () => {
                    this.fitToCanvas();
                });
                
                // –†–µ–∂–∏–º—ã
                document.querySelectorAll('.mode-btn').forEach(btn => {
                    btn.addEventListener('click', () => {
                        document.querySelectorAll('.mode-btn').forEach(b => b.classList.remove('active'));
                        btn.classList.add('active');
                        this.currentMode = btn.dataset.mode;
                        this.render();
                    });
                });
                
                // –†–∞–∑–¥–µ–ª–∏—Ç–µ–ª–∏
                document.getElementById('add-vertical-divider').addEventListener('click', () => {
                    this.addDivider('vertical');
                });
                
                document.getElementById('add-horizontal-divider').addEventListener('click', () => {
                    this.addDivider('horizontal');
                });
                
                // –°–µ–∫—Ü–∏–∏
                document.getElementById('show-sections').addEventListener('click', () => {
                    this.showSections = !this.showSections;
                    const btn = document.getElementById('show-sections');
                    btn.textContent = this.showSections ? 'üôà –°–∫—Ä—ã—Ç—å —Å–µ–∫—Ü–∏–∏' : 'üëÅÔ∏è –ü–æ–∫–∞–∑–∞—Ç—å —Å–µ–∫—Ü–∏–∏';
                    this.render();
                });
                
                document.getElementById('auto-sections').addEventListener('click', () => {
                    this.recalculateSections();
                });
            }
            
            setupCanvas() {
                this.canvas.addEventListener('mousedown', (e) => {
                    this.isDragging = true;
                    this.lastMousePos = this.getMousePos(e);
                });
                
                this.canvas.addEventListener('mousemove', (e) => {
                    const mousePos = this.getMousePos(e);
                    
                    if (this.isDragging) {
                        this.offsetX += mousePos.x - this.lastMousePos.x;
                        this.offsetY += mousePos.y - this.lastMousePos.y;
                        this.render();
                    } else if (this.currentMode === 'view') {
                        // –ü–æ–¥—Å–≤–µ—Ç–∫–∞ –ø–∞–Ω–µ–ª–µ–π –ø—Ä–∏ –Ω–∞–≤–µ–¥–µ–Ω–∏–∏
                        const panel = this.getPanelAtMouse(mousePos);
                        this.canvas.style.cursor = panel ? 'pointer' : 'grab';
                    }
                    
                    this.lastMousePos = mousePos;
                });
                
                this.canvas.addEventListener('mouseup', () => {
                    this.isDragging = false;
                });
                
                this.canvas.addEventListener('click', (e) => {
                    if (this.currentMode === 'view') {
                        const mousePos = this.getMousePos(e);
                        const panel = this.getPanelAtMouse(mousePos);
                        if (panel) {
                            this.selectPanel(panel);
                        }
                    }
                });
                
                this.canvas.addEventListener('wheel', (e) => {
                    e.preventDefault();
                    const factor = e.deltaY > 0 ? 0.9 : 1.1;
                    this.setZoom(this.scale * factor);
                });
                
                // –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π —Ñ–∏—Ç –ø—Ä–∏ —Ä–µ—Å–∞–π–∑–µ
                window.addEventListener('resize', () => {
                    setTimeout(() => this.fitToCanvas(), 100);
                });
                
                this.fitToCanvas();
            }
            
            setZoom(newScale) {
                this.scale = Math.max(0.1, Math.min(5, newScale));
                document.getElementById('zoom-level').textContent = Math.round(this.scale * 100) + '%';
                this.render();
            }
            
            fitToCanvas() {
                if (!this.lightweightCabinet) return;
                
                const padding = 50;
                const availableWidth = this.canvas.width - 2 * padding;
                const availableHeight = this.canvas.height - 2 * padding;
                
                const cabinetWidth = this.lightweightCabinet.dimensions.width;
                const cabinetHeight = this.lightweightCabinet.dimensions.height;
                
                this.scale = Math.min(
                    availableWidth / cabinetWidth,
                    availableHeight / cabinetHeight
                );
                
                this.offsetX = 0;
                this.offsetY = 0;
                
                this.setZoom(this.scale);
            }
            
            render() {
                if (!this.lightweightCabinet) return;
                
                this.ctx.clearRect(0, 0, this.canvas.width, this.canvas.height);
                
                // –†–∞—Å—á–µ—Ç —Ç—Ä–∞–Ω—Å—Ñ–æ—Ä–º–∞—Ü–∏–∏
                const cabinetWidth = this.lightweightCabinet.dimensions.width * this.scale;
                const cabinetHeight = this.lightweightCabinet.dimensions.height * this.scale;
                
                const centerX = this.canvas.width / 2 + this.offsetX;
                const centerY = this.canvas.height / 2 + this.offsetY;
                
                const startX = centerX - cabinetWidth / 2;
                const startY = centerY - cabinetHeight / 2;
                
                // –ë—ã—Å—Ç—Ä–∞—è –æ—Ç—Ä–∏—Å–æ–≤–∫–∞ –ø–∞–Ω–µ–ª–µ–π
                this.LightweightCabinetAdapter.renderLightweight(this.ctx, this.lightweightCabinet, {
                    scale: this.scale,
                    offsetX: startX,
                    offsetY: startY
                });
                
                // –û—Ç—Ä–∏—Å–æ–≤–∫–∞ —Å–µ–∫—Ü–∏–π
                if (this.showSections) {
                    this.renderSections(startX, startY);
                }
                
                // –û—Ç—Ä–∏—Å–æ–≤–∫–∞ —Ä–∞–∑–¥–µ–ª–∏—Ç–µ–ª–µ–π
                this.renderDividers(startX, startY);
                
                // –ü–æ–¥—Å–≤–µ—Ç–∫–∞ –≤—ã–±—Ä–∞–Ω–Ω–æ–π –ø–∞–Ω–µ–ª–∏
                if (this.selectedPanel) {
                    this.highlightPanel(this.selectedPanel, startX, startY);
                }
            }
            
            renderSections(offsetX, offsetY) {
                this.ctx.fillStyle = 'rgba(74, 158, 255, 0.2)';
                this.ctx.strokeStyle = 'rgba(74, 158, 255, 0.8)';
                this.ctx.lineWidth = 2;
                
                this.lightweightCabinet.sections.forEach(section => {
                    if (section.bounds) {
                        const bounds = section.bounds;
                        const x = offsetX + bounds.left * this.scale;
                        const y = offsetY + bounds.top * this.scale;
                        const w = (bounds.right - bounds.left) * this.scale;
                        const h = (bounds.bottom - bounds.top) * this.scale;
                        
                        this.ctx.fillRect(x, y, w, h);
                        this.ctx.strokeRect(x, y, w, h);
                    }
                });
            }
            
            renderDividers(offsetX, offsetY) {
                this.ctx.strokeStyle = '#e74c3c';
                this.ctx.lineWidth = 3;
                this.ctx.setLineDash([5, 5]);
                
                this.dividers.forEach(divider => {
                    this.ctx.beginPath();
                    if (divider.type === 'vertical') {
                        const x = offsetX + divider.position * this.scale;
                        this.ctx.moveTo(x, offsetY);
                        this.ctx.lineTo(x, offsetY + this.lightweightCabinet.dimensions.height * this.scale);
                    } else {
                        const y = offsetY + divider.position * this.scale;
                        this.ctx.moveTo(offsetX, y);
                        this.ctx.lineTo(offsetX + this.lightweightCabinet.dimensions.width * this.scale, y);
                    }
                    this.ctx.stroke();
                });
                
                this.ctx.setLineDash([]);
            }
            
            highlightPanel(panel, offsetX, offsetY) {
                const pos = panel.position;
                const size = panel.dimensions;
                
                const x = offsetX + pos.x * this.scale;
                const y = offsetY + pos.y * this.scale;
                const w = size.width * this.scale;
                const h = size.height * this.scale;
                
                this.ctx.strokeStyle = '#2196f3';
                this.ctx.lineWidth = 3;
                this.ctx.strokeRect(x - 2, y - 2, w + 4, h + 4);
                
                this.ctx.fillStyle = 'rgba(33, 150, 243, 0.2)';
                this.ctx.fillRect(x, y, w, h);
            }
            
            getPanelAtMouse(mousePos) {
                if (!this.lightweightCabinet) return null;
                
                const cabinetWidth = this.lightweightCabinet.dimensions.width * this.scale;
                const cabinetHeight = this.lightweightCabinet.dimensions.height * this.scale;
                
                const centerX = this.canvas.width / 2 + this.offsetX;
                const centerY = this.canvas.height / 2 + this.offsetY;
                
                const startX = centerX - cabinetWidth / 2;
                const startY = centerY - cabinetHeight / 2;
                
                for (const panel of this.lightweightCabinet.panels) {
                    const x = startX + panel.position.x * this.scale;
                    const y = startY + panel.position.y * this.scale;
                    const w = panel.dimensions.width * this.scale;
                    const h = panel.dimensions.height * this.scale;
                    
                    if (mousePos.x >= x && mousePos.x <= x + w &&
                        mousePos.y >= y && mousePos.y <= y + h) {
                        return panel;
                    }
                }
                
                return null;
            }
            
            getMousePos(e) {
                const rect = this.canvas.getBoundingClientRect();
                return {
                    x: e.clientX - rect.left,
                    y: e.clientY - rect.top
                };
            }
            
            selectPanel(panel) {
                this.selectedPanel = panel;
                
                // –û–±–Ω–æ–≤–ª—è–µ–º —Å–ø–∏—Å–æ–∫ –ø–∞–Ω–µ–ª–µ–π
                document.querySelectorAll('.panel-item').forEach(item => {
                    item.classList.remove('selected');
                    if (item.dataset.panelKey === panel.key) {
                        item.classList.add('selected');
                    }
                });
                
                // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –ø–∞–Ω–µ–ª–∏
                document.getElementById('selected-panel-info').innerHTML = `
                    <h4>${panel.name}</h4>
                    <p><strong>–†–∞–∑–º–µ—Ä—ã:</strong> ${panel.dimensions.width}√ó${panel.dimensions.height}√ó${panel.dimensions.depth} –º–º</p>
                    <p><strong>–ü–æ–∑–∏—Ü–∏—è:</strong> x=${panel.position.x}, y=${panel.position.y}, z=${panel.position.z}</p>
                    <p><strong>–ú–∞—Ç–µ—Ä–∏–∞–ª:</strong> ${panel.material}</p>
                `;
                
                this.render();
            }
            
            addDivider(type) {
                const dimension = type === 'vertical' ? 
                    this.lightweightCabinet.dimensions.width : 
                    this.lightweightCabinet.dimensions.height;
                
                const position = dimension / 2; // –ü–æ —Ü–µ–Ω—Ç—Ä—É
                
                this.dividers.push({
                    type,
                    position,
                    id: `divider_${Date.now()}`
                });
                
                this.updateStats();
                this.render();
            }
            
            recalculateSections() {
                // –ü–µ—Ä–µ—Å–æ–∑–¥–∞–µ–º —à–∫–∞—Ñ –¥–ª—è –ø–µ—Ä–µ—Å—á–µ—Ç–∞ —Å–µ–∫—Ü–∏–π
                this.createCabinet();
            }
            
            updateStats() {
                if (!this.lightweightCabinet) return;
                
                const dims = this.lightweightCabinet.dimensions;
                const volume = (dims.width * dims.height * dims.depth / 1000000000).toFixed(2);
                
                document.getElementById('panels-count').textContent = this.lightweightCabinet.panels.length;
                document.getElementById('sections-count').textContent = this.lightweightCabinet.sections.length;
                document.getElementById('dividers-count').textContent = this.dividers.length;
                document.getElementById('cabinet-volume').textContent = volume;
            }
            
            updatePanelsList() {
                const listContainer = document.getElementById('panels-list');
                listContainer.innerHTML = '';
                
                this.lightweightCabinet.panels.forEach(panel => {
                    const item = document.createElement('li');
                    item.className = 'panel-item';
                    item.dataset.panelKey = panel.key;
                    item.innerHTML = `
                        <div class="panel-name">${panel.name}</div>
                        <div class="panel-dimensions">${panel.dimensions.width}√ó${panel.dimensions.height}√ó${panel.dimensions.depth} –º–º</div>
                    `;
                    
                    item.addEventListener('click', () => {
                        this.selectPanel(panel);
                    });
                    
                    listContainer.appendChild(item);
                });
            }
        }

        // üöÄ –ó–∞–ø—É—Å–∫–∞–µ–º –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—É—é —Å–∏—Å—Ç–µ–º—É
        new InteractiveCabinetDesigner();

    </script>
</body>
</html>